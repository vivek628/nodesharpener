'use stritc';

const fs = require('fs');
const MAX_CHARACTERS_IN_FILE = 2048;

const writeAsJSON = (pathToDb, data) => {
  var json = JSON.stringify(data);

  if (json.length < MAX_CHARACTERS_IN_FILE) {
    fs.writeFile(pathToDb, json, err => {
      if (err) {
        throw err;
      }
    });
  } else {
    throw new Error(`NodeStorage: Count of characters
      in file must be less then ${MAX_CHARACTERS_IN_FILE + 1}`);
  }
};

const readJSONDb = pathToDb => {
  var text = fs.readFileSync(pathToDb);
  return JSON.parse(text);
};

module.exports = {writeAsJSON, readJSONDb};
